---
permalink: /erp-technical-guide
title: ERP Integration Technical Guide
layout: default
section_title: ERP Integration

---


| User Workflow | Integrator Workflow | Data/API Workflow |
| ------------- | ------------------- | ----------------- |
| **Establish ERP Connection and Update Configurations** | Authenticate against an integrated Procore company and manage the accounting approver user experience on the ERP Integrations Tool via the company metadata preferences | |
| Procore Super User activates ERP Integrations on customer's company | Procore Only | None
| Project User (admin permission) creates a Service Account in the Procore company. A Client ID and Client secret are generated, as well as a Directory record to manage the Service Account's read/write permissions to all of the tools available on the Procore company | Service Account credentials (Client ID and Client Secret) are communicated to the System Integrator who stores the credentials and uses them against the Authentication API endpoints to retrieve an OAuth Access Token capable of authenticating future requests into Procore on behalf of the Service Account<br>Authenticate and create the Webhook and Trigger (Required to receive ERP events/notifications) | **Create Webhook**<br><br>`POST /rest/v1.0/webhooks/hooks`<br><br>`PAYLOAD {hook: {api_version: 'v2', namespace: {erp_integration}, destination_url: {integration_url}, destination_headers: {'Authorization' => {generated_token}}}}`<br><br>`RESPONSE {id: {hook_id}}`<br><br>**Create Trigger**<br><br>`POST /rest/v1.0/webhooks/hooks/#{hook_id}/triggers`<br><br>`PAYLOAD {trigger: {resource_name: 'ERP Requests', event_type: 'create'}}` |
| Integrator Only | Integrator will use the Company ID, Service Account (CLIENT_ID and CLIENT_SECRET), and the provided Metadata configuration to establish the ERP Connection between Procore and the Integration System<br>Following the ERP Connection, an ERP Standard Cost Code List is automatically created on the company in Procore. Use this list when syncing in Standard Cost Codes explained in following step. | **Establish ERP Connection**<br><br>`POST /rest/v1.0/companies/{company_id}/erp_connections`<br><br>`PAYLOAD {connection: {service_url: 'https://erp.integration.com', metadata:{...}}}`<br><br>`RESPONSE {id: {company_id}, standard_cost_code_list_id: 2}` |
| **Sync ERP Standard Cost Codes and Line Item Types** | Create company-level cost codes and cost types to use with the ERP Integration | |
| User Refresh Standard Cost Codes & Cost Types | System Integrator syncs in the Standard Cost Codes and Cost Types from the accounting system (integrated with the company)<br>Events triggered:<br>- sync_standard_cost_codes<br>- sync_standard_categories | **Sync Standard Cost Codes**<br><br>`PATCH /rest/v1.0/standard_cost_codes/sync`<br><br>`PAYLOAD {company_id: {company_id}, standard_cost_code_list_id: {erp_standard_cost_code_list_id}, updates: [{name: 'Concrete', code: '01', origin_id: 'concrete-1'}]}`<br><br>**Sync Cost Types**<br><br>`PATCH /rest/v1.0/line_item_types/sync`<br><br>`PAYLOAD {company_id: {company_id}, updates: [{name: 'Material', csv_import_code: 'M', origin_id: 'mat-1'}]}` |
| **Vendor Export** | Support the export of Vendors following accounting approval on the ERP Integrations Tool | |
| Project User creates Company (Vendor) in Procore Directory and sends Vendor to the ERP Integrations Tool for Accounting Review | Procore Only | Procore Only
| Accounting Approver has the ability to accept and export the Vendor to the External Application | System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore.<br>Erp Request **create_vendor** should be fulfilled by pushing the exported vendor to the ERP system. The payload should contain the vendor information and **erp_request_detail_id** | **Associate Procore with ERP Origin ID (Mark As Synced)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/external_data/sync`<br><br><br><br>`PAYLOAD {updates: [{item_type: 'vendor', item_id: {vendor_id}, origin_id: {erp_vendor_uuid}}]}`<br><br>`RESPONSE {entities: [{id: 1, item_type: 'vendor', item_id: {vendor_id}, origin_id: {erp_vendor_uuid}}], errors: []}`<br><br>**Update Request Detail (Finish Export Process)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/erp_request_details/{erp_request_detail_id}`<br><br>`PAYLOAD {request_detail: {status: 'success'}}`<br>`{request_detail: {status: 'failed', messages: ['vendor is invalid because the code is not unique']}}` |
| **Vendor Import** | Stage a Vendor for accounting approval on the ERP Integrations tool. Following accounting approval, the ERP object will be deleted and a Procore Vendor will be created inside the Procore company. | |
| Accounting user creates vendors in the ERP Accounting System | ERP Only | ERP Only
| Accountant Approver clicks on "Refresh Vendors" | System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore.<br>Erp Request **sync_vendors** should be fulfilled by staging vendors that have not been synced to Procore. The payload should contain the **erp_request_detail_id** to close out when the staging process is over. | **Stage ERP Vendors**<br><br>`PATCH /rest/v1.0/erp_vendors/sync`<br><br>`PAYLOAD {company_id: {company_id}, updates: [{name: 'Acme Plumbing', origin_id: 'v1'}]}`<br><br>**Update Request Detail (Finish Staging Process)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/erp_request_details/{erp_request_detail_id}`<br><br>`PAYLOAD {request_detail: {status: 'success'}}`<br>`{request_detail: {status: 'failed', messages: ['Cannot stage Joe Plumbing because the code is not unique']}}` |
| Accounting approver has the option to "Show suggested Procore matches" on the "Ready to Import Filter" and then either manually link a staged vendor to a vendor already in Procore, or link all of the "matching" ERP Vendors to existing Vendors in Procore | Note: Procore automatically assigns the Origin ID from the ERP Vendor to the Procore Vendor<br>System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore.<br>Erp Request **merge_vendors** is a notification to the system integrator that the staged ERP Vendor is now synced with a Procore Vendor. | Procore Only |
| Accounting Approver accepts and adds the Vendor to the Directory tool in Procore. The Vendor is marked as synced in Procore | A new Procore Vendor is automatically created and assigned the Origin ID from the ERP Vendor<br>System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore.<br>Erp Request **create_vendor_in_procore** is a notification to the system integrator that the staged ERP Vendor is now synced with a Procore Vendor. | Procore Only |
| **Vendor Link/Unlink** | Stage a Vendor for accounting approval on the ERP Integrations tool. Following accounting approval, the ERP object will be deleted and a Procore Vendor will be created inside the Procore company. | |
| Accounting approver "unlinks" a Vendor that was previously synced via the ERP Integrations Tool | A synced Vendor is unlinked<br>System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore.<br>Erp Request **unlink_vendor** is a notification to the system integrator that the synced Vendor is now unlinked (unsynced) | Procore Only |
| Accounting approver "links" a staged ERP Vendor to a pre-existing Procore Vendor | A staged Vendor is now linked to a Procore Vendor<br>System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore. Erp Request **link_vendor** is a notification to the system integrator that the staged ERP Vendor is now linked to an existing Procore Vendor (synced) | Procore Only |
| **Project Export** | Support the export of Projects and project-level Cost Code Line Item Type Assignments following accounting approval on the ERP Integrations Tool | |
| Project is created in Procore and User sends the Project to the ERP Integrations Tool for Accounting Review | Procore Only | Procore Only |
| Accounting Approver has the ability to accept and export the Project to the External Application | System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore.<br>Erp Request **create_or_update_job** should be fulfilled by pushing the project, cost codes, and cost codes line item type assignments to the ERP system. The payload should contain project and cost code information and **erp_request_detail_id** | **Associate Procore with ERP Origin ID (Mark As Synced)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/external_data/sync`<br><br>`PAYLOAD {updates: [{item_type: 'project', item_id: {project_id}, origin_id: {erp_project_uuid}}, {item_type: 'cost_code', item_id: {cost_code_id}, origin_id: {erp_cost_code_uuid}}]}`<br><br>**Sync Cost Code Cost Type Assignments**<br><br>`PATCH /rest/v1.0/cost_code_line_item_types/sync?project_id={project_id}`<br><br>`PAYLOAD {updates: [{cost_code_id: {cost_code_id}, line_item_type_id: {line_item_type_id}]}`<br><br>**Update Request Detail (Finish Export Process)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/erp_request_details/{erp_request_detail_id}`<br><br>`PAYLOAD {request_detail: {status: 'success'}}<br>{request_detail: {status: 'failed', messages: ['project is invalid because the code is not unique']}}` |
| **Project Import** | Stage a Project for accounting approval on the ERP Integrations tool and manage project-level Cost Code Line Item Type Assignments. Following accounting approval, the ERP object will be deleted and a Procore Project will be created inside the Procore company. | |
| Project is created in the External Application | ERP Only | ERP Only |
| Accountant Approver clicks on "Refresh Jobs" | System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore.<br>Erp Request **sync_jobs** should be fulfilled by staging projects that have not been synced to Procore. The payload should contain the **erp_request_detail_id** to close out when the staging process is over. | **Stage ERP Projects**<br><br>`PATCH /rest/v1.0/erp_projects/sync`<br><br>`PAYLOAD {company_id: {company_id}, updates: [{name: 'Tower Apartment', origin_id: 'p1'}]}`<br><br>**Update Request Detail (Finish Staging Process)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/erp_request_details/{erp_request_detail_id}`<br><br>`PAYLOAD {request_detail: {status: 'success'}}`<br>`{request_detail: {status: 'failed', messages: ['Cannot stage Complex Apartment because the address is not valid']}}` |
| Accounting Approver accepts and adds the Project to the Procore company portfolio. The Project is marked as synced in Procore | A new Procore Project is automatically created and assigned the _Origin ID_ from the ERP Project<br>System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore.<br>Erp Request **create_job_in_procore** should be fulfilled by syncing cost codes and cost type assignments straight to Procore.<br>At this time, the integrator may optionally update the new Procore project's configuration to enable ERP job cost transaction syncing.<br>_Note: The Sync endpoint must be used when creating or updating cost codes. The Create/Update endpoints will not work for ERP integrated projects._ | **Sync Cost Codes**<br><br>`PATCH /rest/v1.0/cost_codes/sync?project_id={project_id}`<br><br>`PAYLOAD {updates: [{name: 'Site Work', code: '01', standard_cost_code_id: {standard_cost_code_id}, origin_id: 'p1'}]}`<br><br>**Sync Cost Code Cost Type Assignments**<br><br>`PATCH /rest/v1.0/cost_code_line_item_types/sync?project_id={project_id}`<br><br>`PAYLOAD {updates: [{cost_code_id: {cost_code_id}, line_item_type_id: {line_item_type_id}, synced: true}]}`<br><br>**Sync ERP Job Costs**<br><br>`PATCH /rest/v1.0/erp_job_costs/sync`<br><br>`PAYLOAD {company_id: {company_id}, job_origin_id: {project_origin_id}, updates: [{"approved_commitment_changes": 0, "approved_estimate_changes": 0, "approved_estimate_unit_changes": 0, "commitment_invoiced": 0, "committed_costs": 0, "cost_code_id": 123, "estimate": 0, "estimate_units": 0, "job_to_date_cost": 0, "job_to_date_dollars_paid": 0, "job_to_date_units": 0, "month_to_date_cost": 0, "month_to_date_dollars_paid": 0, "month_to_date_units": 0, "open_balance": 0, "original_commitment": 0, "original_estimate": 0, "original_estimate_units": 0, "paid_amount": 0, "percentage_complete": 0, "revised_commitment": 0, "line_item_type_id": 456}]}`<br><br>**Update Project Configuration**<br><br>`PATCH /rest/v1.0/projects/{project_id}/configuration`<br><br>`PAYLOAD {configuration: {erp_job_cost_transaction_syncing_enabled: true}}` |
| **Sub Job Export** | Support the export of Sub Job headers and project-level Cost Code Line Item Type Assignments from Procore to an External Application following accounting approval on the ERP Integrations Tool. | |
| Sub Job is created in Procore and User sends the Sub Job to the ERP Integrations Tool for Accounting Review | Procore Only | Procore Only |
| Accounting Approver has the ability to accept and export the Sub Job to the External Application | System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore.<br>Erp Request **create_sub_job** should be fulfilled by pushing the sub job, cost codes, and cost codes line item type assignments to the ERP system. The payload should contain sub job and cost code information and **erp_request_detail_id** | **Associate Procore with ERP Origin ID (Mark As Synced)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/external_data/sync`<br><br>`PAYLOAD {updates: [{item_type: 'sub_job', item_id: {sub_job_id}, origin_id: {erp_sub_job_uuid}}, {item_type: 'cost_code', item_id: {cost_code_id}, origin_id: {erp_cost_code_uuid}}]}`<br><br>**Sync Cost Code Cost Type Assignments**<br><br>`PATCH /rest/v1.0/cost_code_line_item_types/sync?project_id={project_id}&sub_job_id={sub_job_id}`<br><br>`PAYLOAD {updates: [{cost_code_id: {cost_code_id}, line_item_type_id: {line_item_type_id}]}`<br><br>**Update Request Detail (Finish Export Process)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/erp_request_details/{erp_request_detail_id}`<br><br>`PAYLOAD {request_detail: {status: 'success'}}`<br>`{request_detail: {status: 'failed', messages: ['sub job is invalid because the project is not synced']}}` |
| **Sub Job Import** | Stage a Sub Job for accounting approval on the ERP Integrations tool and manage sub-job-level Cost Code Line Item Type Assignments. Following accounting approval, the ERP object will be deleted and a Procore Sub Job will be created inside the Procore company. | |
| Sub Job is created in the External Application | ERP Only | ERP Only |
| Accountant Approver clicks on "Refresh Sub Jobs" | System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore.<br>Erp Request **sync_sub_jobs** should be fulfilled by staging sub jobs that have not been synced to Procore. The payload should contain the **erp_request_detail_id** to close out when the staging process is over. | **Stage ERP Sub Jobs**<br><br>`PATCH /rest/v1.0/erp_sub_jobs/sync`<br><br>`PAYLOAD {company_id: {company_id}, updates: [{name: 'Apartment Upgrade', project_id: {project_id}, origin_id: 'sj1'}]}`<br><br>**Update Request Detail (Finish Staging Process)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/erp_request_details/{erp_request_detail_id}`<br><br>`PAYLOAD {request_detail: {status: 'success'}}`<br>`{request_detail: {status: 'failed', messages: ['Cannot stage House Remodel because the project is not synced']}}` |
| Accounting Approver accepts and adds the Sub Job to the Procore company. The Sub job is marked as synced in Procore | A new Procore Sub Job is automatically created and assigned the Origin ID from the ERP Sub Job record.<br>System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore.<br>Erp Request **create_sub_job_in_procore** should be fulfilled by syncing cost codes and cost type assignments straight to Procore.<br>_Note: The Sync endpoint must be used when creating or updating cost codes. The Create/Update endpoints will not work for ERP integrated projects._ | **Sync Cost Codes**<br><br>`PATCH /rest/v1.0/cost_codes/sync?project_id={project_id}&sub_job_id={sub_job_id}`<br><br>`PAYLOAD {updates: [{name: 'Site Work', code: '01', standard_cost_code_id: {standard_cost_code_id}, origin_id: 'p1'}]}`<br><br>**Sync Cost Code Cost Type Assignments**<br><br>`PATCH /rest/v1.0/cost_code_line_item_types/sync?project_id={project_id}&sub_job_id={sub_job_id}`<br><br>`PAYLOAD {updates: [{cost_code_id: {cost_code_id}, line_item_type_id: {line_item_type_id}, synced: true}]}` |
| **Budget Export**  | Support the export of Budget and its budget line items and modifications from Procore to an External Application following accounting approval on the ERP Integrations Tool. | |
| Budget record along with budget line items and modifications are created in Procore and User sends the Budget to the ERP Integrations Tool for Accounting Review | Procore Only | Procore Only |
| Accounting Approver has the ability to accept and export the Budget to the External Application | System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore.<br>Erp Request **create_budget** should be fulfilled by pushing the budget, budget line items, and budget line item transfers over to the ERP system. The payload should contain ERP transaction records and job costs information and **erp_request_detail_id**.<br>*Note*: Budgets can re-export (update) and therefore ERP transaction records are created to capture transactional changes to a budget upon exporting. You as the integrator will need to set the `origin_id` and the synced values on the ERP transaction records when budget is exported. | **Associate Procore with ERP Origin ID (Mark As Synced)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/external_data/sync`<br><br>`PAYLOAD {updates: [{item_type: 'budget', item_id: {budget_id}, origin_id: {erp_budget_uuid}}]}`<br><br>**Sync ERP Transactions**<br><br>`PATCH /rest/v1.0/erp_transactions/sync`<br><br>`PAYLOAD {project_id: 1, updates: [{id: {transaction_id}, origin_id: {erp_transaction_uuid}, synced: true}]}`<br><br>**Update Request Detail (Finish Export Process)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/erp_request_details/{erp_request_detail_id}`<br><br>`PAYLOAD {request_detail: {status: 'success'}}`<br>`{request_detail: {status: 'failed', messages: ['sub job is invalid because the project is not synced']}}` |
| **Commitment Export** | Support the export of Commitments (Subcontracts + Purchase Orders) and Commitment Line Items from Procore to an External Application following accounting approval on the ERP Integrations Tool. | |
| A Commitment is created in Procore and staged for accounting approval on the ERP Integrations Tool | Procore Only | Procore Only |
| Accounting Approver has the ability to accept and export the Commitment to the External Application | System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore. Erp Request **create_commitment** should be fulfilled by exporting the commitment and its line items to the ERP system. The payload should contain the commitment and line items along with the **erp_request_detail_id** to close out when the export is done. | **Associate Procore with ERP Origin ID (Mark As Synced)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/external_data/sync`<br><br>`PAYLOAD {updates: [{item_type: 'purchase_order_contract', item_id: {commitment_id}, origin_id: {erp_commitment_uuid}}, {item_type: 'line_item', item_id: {line_item_id}, origin_id: {erp_line_item_uuid}}]}`<br><br>**Update Request Detail (Finish Export Process)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/erp_request_details/{erp_request_detail_id}`<br><br>`PAYLOAD {request_detail: {status: 'success'}}`<br>`{request_detail: {status: 'failed', messages: ['purchase order is invalid because the code is not unique']}}` |
| **Commitment Change Order Export** | Support the export of Commitment Change Orders and Line Items from Procore to an External Application following accounting approval on the ERP Integrations Tool. | |
| A Commitment Change Order is created in Procore and staged for accounting approval on the ERP Integrations Tool | Procore Only | Procore Only |
| Accounting Approver has the ability to accept and export the Commitment Change Order to the External Application | System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore. Erp Request **create_commitment_change_order** should be fulfilled by exporting the commitment change order and its line items to the ERP system. The payload should contain the commitment, change order, and line items along with the **erp_request_detail_id** to close out when the export is done. | **Associate Procore with ERP Origin ID (Mark As Synced)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/external_data/sync`<br><br>`PAYLOAD {updates: [{item_type: 'change_order', item_id: {change_order_id}, origin_id: {erp_change_order_uuid}}, {item_type: 'line_item', item_id: {line_item_id}, origin_id: {erp_line_item_uuid}}]}`<br><br>**Update Request Detail (Finish Export Process)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/erp_request_details/{erp_request_detail_id}`<br><br>`PAYLOAD {request_detail: {status: 'success'}}`<br>`{request_detail: {status: 'failed', messages: ['change order is invalid because it contains an invalid line item']}}` |
| **Prime Contract Import** | Stage prime contracts for accounting approval on the ERP Integrations tool.<br>Please note that prime contracts should only be staged if the project it belongs to is synced and all of the cost codes and cost types are synced for the line items.<br>Furthermore, prime contracts can be re-imported meaning that more lines can be added even after the prime contract has already been added to Procore. | |
| Prime Contract is created in the External Application | ERP Only | ERP Only |
| Accountant Approver clicks on "Refresh Prime Contracts" | System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore. Erp Request **sync_jobs** should be fulfilled by staging prime contracts for projects that are synced with ERP. The payload should contain the **erp_request_detail_id** to close out when the staging process is over. | **Stage ERP Projects**<br><br>`PATCH /rest/v1.0/erp_prime_contracts/sync`<br><br>`PAYLOAD {company_id: {company_id}, updates: [{title: 'Tower Apartment Prime', origin_code: 'prime123', origin_id: 'prime_1'}]}`<br><br>**Update Request Detail (Finish Staging Process)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/erp_request_details/{erp_request_detail_id}`<br><br>`PAYLOAD {request_detail: {status: 'success'}}`<br>`{request_detail: {status: 'failed', messages: ['Cannot stage Tower Apartment because the Prime Contract does not have any line items']}}` |
| Accounting Approver accepts and adds the Prime Contract to the project. The Prime Contract is marked as synced in Procore. Further addition of SOVs to the Prime Contract can be re-imported in the synced tab. | A new Procore Prime Contract is automatically created and assigned the Origin ID from the ERP Prime Contract record. | Procore Only |
| **Prime Contract Change Order Export** | Support the export of Prime Contract Change Orders, its SOV lines, and markups following accounting approval on the ERP Integrations Tool | |
| Prime Contract Change Order is created in Procore on a synced Prime Contract and User sends the Prime Contract to the ERP Integrations Tool for Accounting Review | Procore Only | Procore Only |
| Accounting Approver has the ability to accept and export the Prime Contract Change Order to the External ERP Application | System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore.<br>Erp Request **create_prime_contract_change_order** should be fulfilled by pushing the prime contract change order, line items, and change order line markups to the ERP system. The payload should contain prime contract, prime contract change order, and all line item information and **erp_request_detail_id** | **Associate Procore with ERP Origin ID (Mark As Synced)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/external_data/sync`<br><br>`PAYLOAD {updates: [{item_type: 'change_order', item_id: {pcco_id}, origin_id: {erp_pcco_uuid}}, {item_type: 'line_item', item_id: {pcco_line_1_id}, origin_id: {pcco_line_1_origin_id}}, {item_type: 'line_item', item_id: {pcco_line_2_id}, origin_id: {pcco_line_2_origin_id}}, {item_type: 'markup', item_id: {markup_id}, origin_id: {markup_origin_id}}]}`<br><br>**Update Request Detail (Finish Export Process)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/erp_request_details/{erp_request_detail_id}`<br><br>`PAYLOAD {request_detail: {status: 'success'}}`<br>`{request_detail: {status: 'failed', messages: ['prime contract change order is invalid because the code is not unique']}}` |
| **Requisition (Subcontract Invoice) Export** | Support the export of Subcontractor Invoices and its line items from Procore to ERP following accounting approval on the ERP Integrations Tool | |
| Requisition is created in Procore on a synced Commitment Contract and User sends the requisition to the ERP Integrations Tool for Accounting Review | Procore Only | Procore Only |
| Accounting Approver has the ability to accept and export the Requisition to the External ERP Application | System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore. Erp Request **create_requisitions** should be fulfilled by pushing the requisitions, and its line items to the ERP system. The payload should contain a list of requisitions and its line items and the **erp_request_detail_id** | **Associate Procore with ERP Origin ID (Mark As Synced)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/external_data/sync`<br><br>`PAYLOAD {updates: [ {item_type: 'requisition', item_id: {requisition_id}, origin_id: {erp_requisition_uuid}}, {item_type: 'requisition_contract_item', item_id: {requisition_item_1}, origin_id: {erp_req_item_uuid}}, {item_type: 'requisition_contract_detail_item', item_id: {requisition_item_2}, origin_id: {erp_req_detail_item_uuid}}, {item_type: 'requisition_change_order_item', item_id: {requisition_item_3}, origin_id: {erp_req_change_order_item_uuid}}]}`<br><br>**Update Request Detail (Finish Export Process)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/erp_request_details/{erp_request_detail_id}`<br><br>`PAYLOAD {request_detail: {status: 'success'}}`<br>`{request_detail: {status: 'failed', messages: ['Requisition is invalid because the requisition items does not contain valid amounts']}}` |
| **Contract/Invoice Payment Sync** | Sync contract invoice payments directly to Procore at [Sync Invoice Payments](https://developers.procore.com/reference/rest/v1/invoice-payments#updates-creates-invoice-payments-in-bulk)<br>Please note that these contract invoice payments are not staged at all and are synced directly into Procore using a reference `invoice_type/invoice_id` | |
| Invoice payment is created in external ERP application | ERP Only | ERP Only |
| Accountant Approver clicks on "Sync Contract Payments" | System integrator receives Notification Event with **"resource_id": {erp_request_id}**, then calls [GET on ERP Request](https://developers.procore.com/reference/rest/v1/erp-requests#show-erp-request) to retrieve the event payload from Procore. Erp Request **sync_jobs** should be fulfilled by syncing contract invoice payments directly to Procore (no staging involved). The payload should contain the **erp_request_detail_id** to close out when the syncing process is over. | **Stage ERP Projects**<br><br>`PATCH /rest/v1.0/companies/{company_id}/invoice_payments/sync`<br><br>`PAYLOAD {company_id: {company_id}, updates: [{invoice_type: 'Billings::Requisition', invoice_id: 123, origin_code: 'req', origin_id: 'requisition_uuid'}]}`<br><br>**Update Request Detail (Finish Staging Process)**<br><br>`PATCH /rest/v1.0/companies/{company_id}/erp_request_details/{erp_request_detail_id}`<br><br>`PAYLOAD {request_detail: {status: 'success'}}`<br>`{request_detail: {status: 'failed', messages: ['Cannot stage Tower Apartment because the Prime Contract does not have any line items']}}` |
